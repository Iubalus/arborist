<html>

<head>
    <style>
        .card-content {
            width: 120px;
            min-height: 100px;
            padding: 10px;
            text-align: center;
            background: rgb(255, 234, 177);
            border: solid 1px black;
            margin: auto;
            position: relative;
        }

        table {
            border: solid 1px red;
        }

        td {
            align-content: baseline;
        }
    </style>
</head>

<body>
    <table>
        <tbody>
            <tr>
                <td colspan="5">
                    <div class="card-content">1</div>
                </td>
            </tr>
            <tr>
                <td colspan="4">
                    <div class="card-content">1.1</div>
                </td>
                <td>
                    <div class="card-content">1.2</div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="card-content">1.1.1</div>
                </td>
                <td colspan="2">
                    <div class="card-content">1.1.2</div>
                </td>
                <td>
                    <div class="card-content">1.1.3</div>
                </td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div class="card-content">1.1.2.1</div>
                </td>
                <td>
                    <div class="card-content">1.1.2.2</div>
                </td>
                <td></td>
                <td></td>
            </tr>
        </tbody>
    </table>
    <div id="root">
    </div>
    <script>
        let root = document.getElementById("root");
        let card = document.createElement("div");
        let content = {
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam placerat at nunc et egestas.",
            children: [
                {
                    text: "1.1",
                    children: [
                        {
                            text: "1.1.1"
                        },
                        {
                            text: "1.1.2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam placerat at nunc et egestas.",
                            children: [
                                {
                                    text: "1.1.2.1 A"
                                },
                                {
                                    text: "1.1.2.2 B"
                                }
                            ]
                        },
                        {
                            text: "1.1.3",
                            children: [
                                {
                                    text: "1.1.3.1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam placerat at nunc et egestas.",
                                    color: 'rgb(177, 224, 255)'
                                }
                            ]

                        }
                    ]
                },
                {
                    text: "1.2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam placerat at nunc et egestas."
                }
            ]
        }

        function toCell(root) {
            let cell = document.createElement("td");
            let children = countChildren(root);
            if (children > 1) {
                cell.colSpan = children;
            }
            let card = document.createElement("div");
            card.textContent = root.text;
            card.classList = "card-content";
            cell.append(card);
            return cell;
        }
        
        let table2 = document.createElement("table");
        let body2 = document.createElement("tbody");
        function breadth(children, depth) {
            let allChildren = [];
            let hadChildren = false;
            let row = document.createElement("tr");
            children.forEach(child => {
                row.append(toCell(child));
                if (!!child.children) {
                    allChildren = allChildren.concat(child.children);
                    hadChildren = true;
                } else {
                    allChildren.push({});
                }
            })
            body2.append(row);
            if (hadChildren) {
                breadth(allChildren, depth + 1);
            }
        }
        console.log(body2);
        breadth([content], 0);
        root.append(table2);

        function countChildren(root) {
            if (!root.children) {
                return 1;
            }
            return root.children.map(c => countChildren(c)).reduce((l, r) => l + r, 0);
        }

        function toCard(root) {
            let card = document.createElement("div");
            card.textContent = root.text;
            card.classList = "card-content";
            card.style.background = root.color;
            if (!root.children) {
                return card;
            }
            let table = document.createElement("table");
            let body = document.createElement("tbody");
            let row = document.createElement("tr");
            let cell = document.createElement("td");
            if (!!root.children) {
                cell.colSpan = root.children.length;
            }
            cell.append(card);
            row.append(cell);
            body.append(row);
            if (!!root.children) {
                let row2 = document.createElement("tr");
                root.children.forEach(child => {
                    let cell2 = document.createElement("td");
                    cell2.append(toCard(child));
                    row2.append(cell2);
                });
                body.append(row2);
            }
            table.append(body);
            return table;
        }
        //root.append(toCard(content));

    </script>
</body>

</html>