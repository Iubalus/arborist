<html>

<head>
    <style>
        .card-content {
            width: 120px;
            min-height: 100px;
            padding: 10px;
            text-align: center;
            background: rgb(255, 234, 177);
            border: solid 1px black;
            margin: auto;
            position: relative;
        }

        td {
            align-content: baseline;
            padding:10px 5px;
        }
    </style>
</head>

<body>
    <div id="root">
    </div>
    <script>
        let root = document.getElementById("root");
        let card = document.createElement("div");
        let content = {
            text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam placerat at nunc et egestas.",
            children: [
                {
                    text: "1.1",
                    children: [
                        {
                            text: "1.1.1"
                        },
                        {
                            text: "1.1.2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam placerat at nunc et egestas.",
                            children: [
                                {
                                    text: "1.1.2.1 A"
                                },
                                {
                                    text: "1.1.2.2 B"
                                }
                            ]
                        },
                        {
                            text: "1.1.3",
                            children: [
                                {
                                    text: "1.1.3.1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam placerat at nunc et egestas.",
                                    color: 'rgb(177, 224, 255)'
                                }
                            ]

                        }
                    ]
                },
                {
                    text: "1.2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam placerat at nunc et egestas."
                }
            ]
        }

        function countLeaves(root) {
            if (!root.children) {
                return 1;
            }
            return root.children.map(c => countLeaves(c)).reduce((l, r) => l + r, 0);
        }

        function toCell(root) {
            if (!root.text) {
                return document.createElement("td");//placeholder cell for spacing
            }
            let cell = document.createElement("td");
            let leaves = countLeaves(root);
            if (leaves > 1) {
                cell.colSpan = leaves;
            }
            let card = document.createElement("div");
            card.textContent = root.text;
            card.classList = "card-content";
            card.style.background = root.color;
            cell.append(card);
            return cell;
        }

        function toRows(children) {
            let allChildren = [];
            let hadChildren = false;
            let row = document.createElement("tr");
            children.forEach(child => {
                row.append(toCell(child));
                if (!!child.children) {
                    allChildren = allChildren.concat(child.children);
                    hadChildren = true;
                } else {
                    allChildren.push({});//placeholder object for spacing
                }
            })
            let rows = [];
            rows.push(row);
            if (hadChildren) {
                rows = rows.concat(toRows(allChildren));
            }
            return rows;
        }

        function toTable(node) {
            let table = document.createElement("table");
            table.cellPadding = 0;
            table.cellSpacing = 0;
            let body = document.createElement("tbody");
            let rows = toRows([node]);
            rows.forEach(r => {
                body.append(r);
            })
            table.append(body);
            return table;
        }

        root.append(toTable(content));
    </script>
</body>

</html>